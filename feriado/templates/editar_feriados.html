{% extends "base_login.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <h2>Editar Feriado</h2>

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}  <!-- Exibe os campos do formulário do feriado -->

        <div class="row">
            <div class="col-md-6">
                <h3>Condomínios Pendentes</h3>
                <div class="container-condominios">
                    <strong>Total de {{ condominios.count }} condomínios</strong>
                    <div class="lista-condominios">
                        <ul>
                            {% for condominio in condominios %}
                            <li>
                                <label>
                                    <input type="checkbox" name="condominios" value="{{ condominio.id }}">
                                    {{ condominio.nome_condominio }}
                                </label>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <h3>Condomínios Selecionados</h3>
                <div class="container-condominios">
                    <strong>Total de 0 condomínios selecionados</strong>
                    <div class="lista-condominios" id="selected-condominios">
                        <ul>
                            <!-- Aqui você pode adicionar lógica para mostrar os condomínios selecionados -->
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Salvar</button>
        <a href="{% url 'listar_feriados' %}" class="btn btn-secondary">Cancelar</a>
    </form>
</div>

<script>
    // JavaScript para gerenciar a seleção de condomínios
    const checkboxes = document.querySelectorAll('input[name="condominios"]');
    const selectedContainer = document.getElementById('selected-condominios').getElementsByTagName('ul')[0];

    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            if (this.checked) {
                const newItem = document.createElement('li');
                newItem.textContent = this.nextSibling.textContent; // O nome do condomínio
                selectedContainer.appendChild(newItem);
            } else {
                const items = selectedContainer.getElementsByTagName('li');
                for (let i = 0; i < items.length; i++) {
                    if (items[i].textContent === this.nextSibling.textContent) {
                        selectedContainer.removeChild(items[i]);
                        break;
                    }
                }
            }
            // Atualizar total de condomínios selecionados
            document.querySelector('strong').textContent = `Total de ${selectedContainer.children.length} condomínios selecionados`;
        });
    });
</script>

<style>
    .container-condominios {
        height: 300px; /* Define uma altura fixa para os containers */
        overflow-y: auto; /* Adiciona barra de rolagem vertical */
        border: 1px solid #ccc; /* Adiciona uma borda para visualização */
        padding: 10px; /* Espaçamento interno */
    }
    .lista-condominios {
        list-style-type: none; /* Remove os marcadores da lista */
        padding: 0; /* Remove o padding padrão da lista */
    }
    .lista-condominios li {
        padding: 5px 0; /* Espaçamento entre os itens */
    }
</style>
{% endblock %}
